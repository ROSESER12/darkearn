<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DarkCoin</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
margin:0;
font-family:monospace;
background:#000;
color:#fff;
text-align:center;
overflow:hidden;
}

/* background skulls */
.skull{
position:fixed;
font-size:40px;
opacity:0.07;
animation:float 20s linear infinite;
}
@keyframes float{
from{transform:translateY(120vh) rotate(0deg)}
to{transform:translateY(-20vh) rotate(360deg)}
}

/* UI */
.top{
font-size:28px;
padding:15px;
border-bottom:1px solid #fff;
}

.card{
border:1px solid #fff;
margin:10px;
padding:15px;
border-radius:12px;
background:#000;
box-shadow:0 0 20px rgba(255,255,255,0.15);
}

button{
background:#000;
border:1px solid #fff;
color:#fff;
padding:15px;
margin:5px;
width:90%;
font-size:16px;
}

button:active{
transform:scale(0.95);
background:#111;
}

.menu{
position:fixed;
bottom:0;
width:100%;
display:flex;
background:#000;
border-top:1px solid #fff;
}
.menu button{
font-size:12px;
padding:10px;
}
.hidden{display:none}
</style>
</head>

<body>

<div class="top">☠ DARKCOIN ☠</div>

<!-- EARN -->
<div id="earn" class="card">
<h3>Баланс</h3>
<h1 id="coins">0</h1>
<p>Энергия: <span id="energy">100</span></p>
<button onclick="mine()">МАЙНИТЬ</button>
</div>

<!-- UPGRADES -->
<div id="upgrades" class="card hidden">
<h3>Прокачка</h3>
<p>Сила: <span id="power">1</span></p>
<p>Фарм: <span id="farm">0</span>/сек</p>
<button onclick="buyPower()">+Сила (50)</button>
<button onclick="buyFarm()">+Фарм (200)</button>
</div>

<!-- NFT -->
<div id="nft" class="card hidden">
<h3>NFT MARKET</h3>
<button onclick="buyNFT('Skull',500)">Skull 500</button>
<button onclick="buyNFT('Black Skull',2000)">Black Skull 2000</button>

<h4>Инвентарь</h4>
<div id="inventory"></div>
</div>

<!-- MARKET -->
<div id="market" class="card hidden">
<h3>Рынок игроков</h3>
<p>Скоро: продажа NFT между игроками</p>
</div>

<!-- PROFILE -->
<div id="profile" class="card hidden">
<h3>Профиль</h3>
<p id="username"></p>
<p>Level: <span id="level">1</span></p>
</div>

<div class="menu">
<button onclick="tab('earn')">Mine</button>
<button onclick="tab('upgrades')">Up</button>
<button onclick="tab('nft')">NFT</button>
<button onclick="tab('market')">Market</button>
<button onclick="tab('profile')">Me</button>
</div>

<script>
let tg = window.Telegram.WebApp;
tg.expand();

/* USER */
let user = tg.initDataUnsafe?.user;
if(user){
username.innerText="@"+user.username;
}

/* DATA */
let coins=+localStorage.getItem("coins")||0;
let energy=+localStorage.getItem("energy")||100;
let power=+localStorage.getItem("power")||1;
let farm=+localStorage.getItem("farm")||0;
let level=+localStorage.getItem("level")||1;
let nft=JSON.parse(localStorage.getItem("nft")||"[]");

/* UI */
function save(){
localStorage.setItem("coins",coins);
localStorage.setItem("energy",energy);
localStorage.setItem("power",power);
localStorage.setItem("farm",farm);
localStorage.setItem("level",level);
localStorage.setItem("nft",JSON.stringify(nft));
}

function update(){
coinsEl.innerText=coins;
document.getElementById("coins").innerText=coins;
document.getElementById("energy").innerText=energy;
document.getElementById("power").innerText=power;
document.getElementById("farm").innerText=farm;
document.getElementById("level").innerText=level;

let inv="";
nft.forEach(n=>inv+="☠ "+n+"<br>");
inventory.innerHTML=inv;

save();
}
update();

/* MINE */
function mine(){
if(energy<=0) return;
coins+=power;
energy--;
level=Math.floor(coins/1000)+1;
update();
}

/* AUTO FARM */
setInterval(()=>{
coins+=farm;
update();
},1000);

/* ENERGY */
setInterval(()=>{
if(energy<100){energy++;update();}
},3000);

/* UPGRADES */
function buyPower(){
if(coins>=50){coins-=50;power++;update();}
}
function buyFarm(){
if(coins>=200){coins-=200;farm++;update();}
}

/* NFT */
function buyNFT(name,price){
if(coins>=price){
coins-=price;
nft.push(name);
update();
}
}

/* TABS */
function tab(id){
document.querySelectorAll(".card").forEach(e=>e.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

/* SKULL BACKGROUND */
for(let i=0;i<25;i++){
let s=document.createElement("div");
s.className="skull";
s.innerHTML="☠";
s.style.left=Math.random()*100+"vw";
s.style.fontSize=(20+Math.random()*50)+"px";
s.style.animationDuration=(10+Math.random()*20)+"s";
document.body.appendChild(s);
}
</script>

</body>
</html>
